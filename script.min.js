$(document).ready(function () { $(".room-slider").slick({ infinite: true, slidesToShow: 2.5, slidesToScroll: 1, arrows: true, dots: true, responsive: [ { breakpoint: 1024, settings: { slidesToShow: 2 } }, { breakpoint: 768, settings: { slidesToShow: 1, arrows: false } }, ], }); gsap.registerPlugin(ScrollTrigger); ScrollTrigger.create({ start: "top -50", onEnter: () => $("#main-header").addClass("scrolled"), onLeaveBack: () => $("#main-header").removeClass("scrolled"), }); gsap.from(".hero-title", { y: 120, opacity: 0, duration: 2, ease: "power4.out", }); gsap.utils.toArray(".reveal").forEach((el) => { gsap.to(el, { scrollTrigger: { trigger: el, start: "top 90%" }, opacity: 1, y: 0, duration: 1.5, ease: "expo.out", }); }); const $items = $(".masonry-item"); const $loadMoreBtn = $("#load-more-gallery"); const $lightboxModal = $("#lightbox-modal"); const $lightboxImage = $("#lightbox-image"); const $counter = $("#lightbox-counter"); const $tabs = $(".tab-btn"); let currentImages = []; let currentIndex = 0; const updateGallery = (filter, showAll = false) => { const $filteredItems = (filter === "all") ? $items : $items.filter("." + filter); const $visibleItems = showAll ? $filteredItems : $filteredItems.slice(0, 5); $items.hide().css({ opacity: 0, scale: 0.95 }); if ($filteredItems.length > 5 && !showAll) { $loadMoreBtn.parent().show(); } else { $loadMoreBtn.parent().hide(); } $visibleItems.show(); gsap.to($visibleItems, { scale: 1, opacity: 1, duration: 0.6, stagger: 0.1, ease: "expo.out" }); }; updateGallery("all", false); $tabs.on("click", function () { const filter = $(this).data("filter"); $tabs.removeClass("active"); $(this).addClass("active"); updateGallery(filter, false); }); $loadMoreBtn.on("click", () => { const activeFilter = $tabs.filter(".active").data("filter"); updateGallery(activeFilter, true); }); const updateLightboxImage = (index) => { currentIndex = index; const src = $(currentImages[currentIndex]).attr("src"); gsap.to($lightboxImage, { opacity: 0, scale: 0.98, duration: 0.3, onComplete: () => { $lightboxImage.attr("src", src); $counter.text(`${currentIndex + 1} / ${currentImages.length}`); gsap.to($lightboxImage, { opacity: 1, scale: 1, duration: 0.4, ease: "power2.out" }); } }); }; const closeLightbox = () => { $lightboxModal.removeClass("active"); $("body").css("overflow", ""); setTimeout(() => $lightboxImage.attr("src", ""), 400); }; const navigateImage = (direction) => { const newIdx = (currentIndex + direction + currentImages.length) % currentImages.length; updateLightboxImage(newIdx); }; $(document).on("click", ".masonry-item img", function () { const activeFilter = $tabs.filter(".active").data("filter") || "all"; const selector = activeFilter === "all" ? ".masonry-item img" : `.masonry-item.${activeFilter} img`; currentImages = $(selector).toArray(); currentIndex = currentImages.indexOf(this); if (currentIndex !== -1) { updateLightboxImage(currentIndex); $lightboxModal.addClass("active"); $("body").css("overflow", "hidden"); } }); $("#next-btn").on("click", (e) => { e.stopPropagation(); navigateImage(1); }); $("#prev-btn").on("click", (e) => { e.stopPropagation(); navigateImage(-1); }); $("#close-lightbox-btn").on("click", closeLightbox); $lightboxModal.on("click", (e) => { if ($(e.target).hasClass("lightbox-modal")) closeLightbox(); }); $(document).on("keydown", (e) => { if ($lightboxModal.hasClass("active")) { if (e.key === "Escape") closeLightbox(); if (e.key === "ArrowRight") navigateImage(1); if (e.key === "ArrowLeft") navigateImage(-1); } }); const $bookingModal = $("#booking-modal"); const openBookingModal = () => { $bookingModal.addClass("active"); $("body").css("overflow", "hidden"); }; const closeBookingModal = () => { $bookingModal.removeClass("active"); $("body").css("overflow", ""); }; $(".suite-media, .suite-card img, .open-booking-modal").on("click", (e) => { e.preventDefault(); openBookingModal(); }); $("#close-booking-modal").on("click", closeBookingModal); $bookingModal.on("click", (e) => { if ($(e.target).hasClass("booking-modal-overlay")) closeBookingModal(); }); $(document).on("keydown", (e) => { if (e.key === "Escape" && $bookingModal.hasClass("active")) closeBookingModal(); }); });